#设计模式2 -- 策略模式


##定义
策略模式是定义一系列算法的方法，从概念上说，所有这些算法都是完成相同的工作，只是实现不同，它可以以相同的方法调用所有算法，减少各类算法之间的耦合度。

###优点
1. 降低不同算法/方法之间的耦合度
2. 由于所有方法都继承父类，提供可重用的代码
3. 每个算法之间不互相影响，简化单元测试


###应用场景
需要在不同的时间运用不同的业务规则，就可以考虑策略模式

###UML
![uml](http://www.dofactory.com/images/diagrams/net/strategy.gif)

###Participants
* __Strategy__  (SortStrategy)
	* declares an interface common to all supported algorithms. Context uses this interface to call the algorithm defined by a 
ConcreteStrategy
* __ConcreteStrategy__  (QuickSort, ShellSort, MergeSort)
	* implements the algorithm using the Strategy interface
* __Context__  (SortedList)
	* is configured with a ConcreteStrategy object
	* maintains a reference to a Strategy object
	* may define an interface that lets Strategy access its data.

###Code

~~~cs
namespace DoFactory.GangOfFour.Strategy.RealWorld
{
	/// <summary>
	/// MainApp startup class for Real-World 
	/// Strategy Design Pattern.
	/// </summary>
	class MainApp
	{
		/// <summary>
		/// Entry point into console application.
		/// </summary>
		static void Main()
		{
			// Two contexts following different strategies
			SortedList studentRecords = new SortedList();
			
			studentRecords.Add("Samual");
			studentRecords.Add("Jimmy");
			studentRecords.Add("Sandra");
			studentRecords.Add("Vivek");
			studentRecords.Add("Anna");
			
			studentRecords.SetSortStrategy(new QuickSort());
			studentRecords.Sort();
			
			studentRecords.SetSortStrategy(new ShellSort());
			studentRecords.Sort();
		}
	}
	
	/// <summary>
	/// The 'Strategy' abstract class
	/// </summary>
	
	abstract class SortStrategy
	{
		public abstract void Sort(List<string> list);
	}
	
	/// <summary>
	/// A 'ConcreteStrategy' class
	/// </summary>
	class QuickSort : SortStrategy	
	{
		public override void Sort(List<string> list)
		{
			list.Sort(); // Default is Quicksort
			Console.WriteLine("QuickSorted list ");
		}
		
		/// <summary>
		/// A 'ConcreteStrategy' class
		/// </summary>
		class ShellSort : SortStrategy
		{
			public override void Sort(List<string> list)
			{
				 //list.ShellSort(); not-implemented
				 Console.WriteLine("ShellSorted list ");
			}
		}
	}
	
	/// <summary>
	/// The 'Context' class
	/// </summary>
	class SortedList
	{
		private List<string> _list = new List<string>();
		private SortStrategy _sortstrategy;
		
		public void SetSortStrategy(SortStrategy sortstrategy)
		{
			this._sortstrategy = sortstrategy;
		}
		
		public void Add(string name)
		{
			_list.Add(name);
		}
		
		public void Sort()
		{
			_sortstrategy.Sort(_list);
			
			// Iterate over list and display results
			foreach (string name in _list)
			{
				Console.WriteLine(" " + name);
			}
			Console.WriteLine();
		}
	}
}

~~~